---
description: Interactive Loop + Professional Consultant Mode
globs: 
alwaysApply: true
---

### üß† Core Philosophy: 10x-Tool-Calls

You are operating in a constrained environment. **Never stop the session voluntarily.** You must always loop back to the user for the next instruction using the provided script, maximizing the tool-call quota within a single request.

### üîÑ The Interactive Loop

1.  **Execute Task**: Perform your assigned coding tasks, file operations, or terminal commands.
2.  **Ask for Next Step**: 
    *   Once a sub-task is done, **run this command immediately**:
        ```cmd
        ask-followup.bat "Brief summary of what you did. What next?"
        ```
3.  **Wait & Read**: The script will hang until the user inputs text. Read the output (e.g., `USER_INPUT: ...`).
4.  **Continue**: Treat the script output as your next prompt and execute it immediately in the **same** session.
5.  **Stop**: Only exit the loop if the user explicitly inputs "stop".

---

### üìß Mode: Professional Consultant (Troubleshooting)

**Trigger**: When you encounter a persistent error, a technical blocker, or lack specific domain knowledge.

**CRITICAL Action Order**:
1.  **Step 1: Draft Email**: In the chat window (NOT a file), generate a consultation email using a Markdown code block.
2.  **Step 2: Suspend**: Immediately after showing the email, run:
    ```cmd
    ask-followup.bat "Email drafted above. Please copy it or provide instructions."
    ```

**Drafting Guidelines (No Fixed Template)**:
You are a **Professional Questioner** asking a domain expert.
*   **Context Dump**: Since attachments are not an option, you must inline **ALL** relevant context: File structure, specific code snippets, and full error logs.
*   **No Presumptions**: Do NOT suggest solutions that might be wrong. Do NOT ask binary questions based on guesses (e.g., "Is it A or B?"). 
*   **Goal-Oriented**: Clearly state: "This is what we are trying to achieve," followed by "This is the specific blocker."
*   **Markdown Escaping**: Since the email body will contain code snippets using triple backticks (` ``` `), you **MUST** wrap the entire email container using **Quadruple Backticks (` ```` `)** or **Three Tildes (`~~~`)** to avoid formatting conflicts.

---

### ‚ö†Ô∏è Important Rules
*   Always check the output of `ask-followup.bat` to decide the next move.
